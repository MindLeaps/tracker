(function(m){"object"===typeof module&&module.exports?module.exports=m:m(Highcharts)})(function(m){function A(a){var d=[0,0,0,0,0,0],b=0,c=[];for(f=a.length;b<f;b++)null!=a[b].x&&(a[b][0]=a[b].x,a[b][1]=a[b].y),null!=a[b][1]&&(d[0]+=a[b][0],d[1]+=a[b][1],d[2]+=a[b][0]*a[b][0]*a[b][1],d[3]+=a[b][1]*Math.log(a[b][1]),d[4]+=a[b][0]*a[b][1]*Math.log(a[b][1]),d[5]+=a[b][0]*a[b][1]);f=d[1]*d[2]-d[5]*d[5];b=Math.pow(Math.E,(d[2]*d[3]-d[5]*d[4])/f);d=(d[1]*d[4]-d[5]*d[3])/f;for(var e=0,f=a.length;e<f;e++)c.push([a[e][0],
b*Math.pow(Math.E,d*a[e][0])]);c.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});return{equation:[b,d],points:c,string:"y = "+Math.round(100*b)/100+"e^("+Math.round(100*d)/100+"x)"}}function B(a,d){for(var b=[0,0,0,0,0],c=0,e=[],f=a.length;c<a.length;c++)null!=a[c].x&&(a[c][0]=a[c].x,a[c][1]=a[c].y),null!=a[c][1]?(b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][0]*a[c][0],b[3]+=a[c][0]*a[c][1],b[4]+=a[c][1]*a[c][1]):--f;c=(f*b[3]-b[0]*b[1])/(f*b[2]-b[0]*b[0]);b=b[1]/f-c*b[0]/f;f=0;for(var h=a.length;f<
h;f++){var k=a[f][0]*c+b;d&&(k=parseFloat(k.toFixed(d)));e.push([a[f][0],k])}e.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});return{equation:[c,b],points:e,string:"y = "+Math.round(100*c)/100+"x + "+Math.round(100*b)/100}}function C(a){var d=[0,0,0,0],b=0,c=[];for(f=a.length;b<f;b++)null!=a[b].x&&(a[b][0]=a[b].x,a[b][1]=a[b].y),null!=a[b][1]&&(d[0]+=Math.log(a[b][0]),d[1]+=a[b][1]*Math.log(a[b][0]),d[2]+=a[b][1],d[3]+=Math.pow(Math.log(a[b][0]),2));var e=(b*d[1]-d[2]*d[0])/(b*d[3]-d[0]*d[0]);
d=(d[2]-e*d[0])/b;b=0;for(var f=a.length;b<f;b++)c.push([a[b][0],d+e*Math.log(a[b][0])]);c.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});return{equation:[d,e],points:c,string:"y = "+Math.round(100*d)/100+" + "+Math.round(100*e)/100+" ln(x)"}}function D(a){var d=[0,0,0,0],b=0,c=[];for(f=a.length;b<f;b++)null!=a[b].x&&(a[b][0]=a[b].x,a[b][1]=a[b].y),null!=a[b][1]&&(d[0]+=Math.log(a[b][0]),d[1]+=Math.log(a[b][1])*Math.log(a[b][0]),d[2]+=Math.log(a[b][1]),d[3]+=Math.pow(Math.log(a[b][0]),2));
var e=(b*d[1]-d[2]*d[0])/(b*d[3]-d[0]*d[0]);d=Math.pow(Math.E,(d[2]-e*d[0])/b);b=0;for(var f=a.length;b<f;b++)c.push([a[b][0],d*Math.pow(a[b][0],e)]);c.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});return{equation:[d,e],points:c,string:"y = "+Math.round(100*d)/100+"x^"+Math.round(100*e)/100}}function E(a,d,b){"undefined"==typeof d&&(d=2);for(var c=[],e=[],f=[],h=0,k=0,g=0,u=d+1;g<u;g++){var l=0;for(d=a.length;l<d;l++)null!=a[l].x&&(a[l][0]=a[l].x,a[l][1]=a[l].y),null!=a[l][1]&&(h+=Math.pow(a[l][0],
g)*a[l][1]);c.push(h);h=0;for(var n=[],m=0;m<u;m++){l=0;for(d=a.length;l<d;l++)a[l][1]&&(k+=Math.pow(a[l][0],g+m));n.push(k);k=0}e.push(n)}e.push(c);c=F(e,u);d=a.length+b;b=a[a.length-1][0]-a[a.length-2][0];for(g=0;g<d;g++){h=e=0;h="undefined"!==typeof a[g]?a[g][0]:a[a.length-1][0]+(g-a.length)*b;for(k=0;k<c.length;k++)e+=c[k]*Math.pow(h,k);f.push([h,e])}f.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});a="y = ";for(g=c.length-1;0<=g;g--)a=1<g?a+(Math.round(100*c[g])/100+"x^"+g+" + "):1==g?
a+(Math.round(100*c[g])/100+"x + "):a+Math.round(100*c[g])/100;return{equation:c,points:f,string:a}}function G(a,d){function b(a){a=1-a*a*a;return a*a*a}d=d||.25;var c=a.map(function(a){return a[0]}),e=function(a){var b={},c,d=a.length,e=[];for(c=0;c<d;c+=1)b[a[c]]=a[c];for(c in b)e.push(b[c]);return e}(c);2/e.length>d&&(d=Math.min(2/e.length,1),console.warn("updated bandwith to "+d));e=a.map(function(a){return a[1]});var f=[],h=0,k=Math.floor(d*c.length)-1,g;for(g in c){var m=c[g];0<g&&k<c.length-
1&&c[k+1]-c[g]<c[g]-c[h]&&(h++,k++);for(var l=Math.abs(1/(c[c[g]-c[h]>c[k]-c[g]?h:k]-m)),n=0,q=0,y=0,r=0,v=0,p=h;p<=k;){var t=c[p],z=e[p],w=b((p<g?m-t:t-m)*l),x=t*w;n+=w;q+=x;y+=t*x;r+=z*w;v+=z*x;p++}l=q/n;r/=n;v/=n;n=y/n;n=n==l*l?0:(v-l*r)/(n-l*l);f[g]=n*m+(r-n*l)}return{equation:"",points:c.map(function(a,b){return[a,f[b]]}),string:""}}function F(a,d){var b,c,e,f=a.length-1,h=Array(d);for(b=0;b<f;b++){var k=b;for(c=b+1;c<f;c++)Math.abs(a[b][c])>Math.abs(a[b][k])&&(k=c);for(e=b;e<f+1;e++){var g=
a[e][b];a[e][b]=a[e][k];a[e][k]=g}for(c=b+1;c<f;c++)for(e=f;e>=b;e--)a[e][c]-=a[e][b]*a[b][c]/a[b][b]}for(c=f-1;0<=c;c--){g=0;for(e=c+1;e<f;e++)g+=a[e][c]*h[e];h[c]=(a[f][c]-g)/a[c][c]}return h}function H(a,d){a.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});for(var b=0,c=a.length,e=0;e<a.length;e++)null!=a[e][1]?b+=a[e][1]:c--;b/=c;var f=c=0;for(e=0;e<a.length;e++)null!=a[e][1]&&(f+=Math.pow(a[e][1]-d[e][1],2),c+=Math.pow(a[e][1]-b,2));return 1-f/c}var q=function(a,d,b){if(a.regression&&
!a.rendered){a.regressionSettings=a.regressionSettings||{};a.regressionSettings.tooltip=a.regressionSettings.tooltip||{};a.regressionSettings.dashStyle=a.regressionSettings.dashStyle||"solid";a.regressionSettings.decimalPlaces=a.regressionSettings.decimalPlaces||2;a.regressionSettings.useAllSeries=a.regressionSettings.useAllSeries||!1;var c=a.regressionSettings.type||"linear";d={data:[],color:a.regressionSettings.color||"",yAxis:a.yAxis,lineWidth:a.regressionSettings.lineWidth||2,marker:{enabled:!1},
isRegressionLine:!0,visible:a.regressionSettings.visible,type:a.regressionSettings.linetype||"spline",name:a.regressionSettings.name||"Equation: %eq",id:a.regressionSettings.id,dashStyle:a.regressionSettings.dashStyle||"solid",showInLegend:!a.regressionSettings.hideInLegend,tooltip:{valueSuffix:a.regressionSettings.tooltip.valueSuffix||" "}};b=a.data;if(a.regressionSettings.useAllSeries)for(b=[],di=0;di<series.length;di++)b=b.concat(series[di].data);if("linear"==c)c=B(b,a.regressionSettings.decimalPlaces),
d.type="line";else if("exponential"==c)c=A(b);else if("polynomial"==c)c=E(b,a.regressionSettings.order||2,a.regressionSettings.extrapolate||0);else if("power"==c)c=D(b);else if("logarithmic"==c)c=C(b);else if("loess"==c)c=G(b,(a.regressionSettings.loessSmooth||25)/100);else{console.error("Invalid regression type: ",c);return}c.rSquared=H(b,c.points);c.rValue=Math.sqrt(c.rSquared).toFixed(a.regressionSettings.decimalPlaces);c.rSquared=c.rSquared.toFixed(a.regressionSettings.decimalPlaces);a=a.regressionSettings.decimalPlaces;
for(var e=0,f=b.length,h=0;h<b.length;h++)null!=b[h][1]?e+=Math.pow(b[h][1]-c.points[h][1],2):f--;e=Math.sqrt(e/(f-2));c.standardError=e.toFixed(a);d.data=c.points;d.name=d.name.replace("%r2",c.rSquared);d.name=d.name.replace("%r",c.rValue);d.name=d.name.replace("%eq",c.string);d.name=d.name.replace("%se",c.standardError);!1===d.visible&&(d.visible=!1);d.regressionOutputs=c;return d}};m.wrap(m.Chart.prototype,"init",function(a){var d=arguments[1].series,b=[],c;for(c=0;c<d.length;c++){var e=d[c];if(e.regression){var f=
q(e,"init",this);b.push(f);arguments[1].series[c].rendered=!0}}f&&(arguments[1].series=d.concat(b));a.apply(this,Array.prototype.slice.call(arguments,1))});m.wrap(m.Chart.prototype,"addSeries",function(a){var d=q(arguments[1],"addSeries",this);arguments[1].rendered=!0;d&&this.addSeries(d);a.apply(this,Array.prototype.slice.call(arguments,1))})});